# !! try to keep this minimal please

colorscheme kanagawa

# windowing !not working
hook global ModuleLoaded x11 %{
    set-option global termcmd 'wezterm cli split-pane -- sh -c'
}

# relative line numbers
hook global BufCreate .* %[
    add-highlighter buffer/ number-lines -relative -hlcursor
    add-highlighter buffer/ wrap
]

# indentation
set-option global tabstop     4
set-option global indentwidth 4

# scrolloff
set-option global scrolloff   6,4

# tabs to spaces
hook global InsertChar \t %{
    exec -draft h@
}

# jk to exit insert mode
hook global InsertChar k %{ try %{
    exec -draft hH <a-k>jk<ret> d
    exec <esc>
}}

# kak-lsp
eval %sh{kak-lsp --config "$HOME"/.config/kak/kak-lsp/kak-lsp.toml --kakoune -s $kak_session}
hook global WinSetOption filetype=(rust|python|javascript|typescript) %{
    lsp-enable-window
}

# wezterm.kak
wezterm-integration-enable
set-option global wezterm_terminal_default wezterm-terminal-horizontal
